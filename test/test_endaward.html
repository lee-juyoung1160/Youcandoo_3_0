<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="keywords" content="공부습관,야나두,자기계발,자기개발,습관형성,자기관리앱,목표관리,생활습관,목표,목표달성,동기부여,습관">
	<meta property="og:type" content="교육">
	<meta property="og:title" content="목표달성 커뮤니티 앱 유캔두">
	<meta property="og:url" content="https://www.youcandoo.co.kr">
	<link rel="shortcut icon" href="https://youcandoo.yanadoocdn.com/v3/web/assets/images/favicon.ico">
	<meta property="og:description" content="쉬운 방법으로 빠른 달성을 돕는 매일 1%의 성장습관. 오늘부터 하루 10분 관리 해보세요.">
	<meta property="og:image" content="https://youcandoo.yanadoocdn.com/v3/web/assets/images/thumbnail.jpg">
	<title>유캔두</title>
</head>
<style>
	/* reset css */
	html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video,button{margin:0;padding:0;font-style:normal; font-weight:normal !important;vertical-align:baseline;font-size:100%;border:0}*::-webkit-scrollbar-track,.modal_container::-webkit-scrollbar-track{background-color:rgba(0,0,0,.1);border-radius:10px;margin-top:5px;margin-bottom:0}*::-webkit-scrollbar,.modal_container::-webkit-scrollbar{width:5px;background-color:#fff;margin-top:20px;margin-bottom:20px}*::-webkit-scrollbar-thumb,.modal_container::-webkit-scrollbar-thumb{background-color:#717171;border-radius:10px;margin-top:20px;margin-bottom:20px}*:focus{outline:none}body{width:100%;min-width:280px;height:auto;line-height:1;font-family:"NanumSquareOTFRegular","sans-serif";font-size:15px!important;color:#000000;background-color:#fff}img{max-width:100%;vertical-align:top;height:auto!important}ol,ul,li{list-style:none}table{border-collapse:collapse;border-spacing:0}hr{display:block;margin:16px 0;padding:0;height:1px;border:0;border-top:1px solid #ccc}button{outline:none;cursor:pointer}i{cursor:pointer}input::-ms-clear,input::-ms-reveal{display:none;width:0;height:0}input::-webkit-search-decoration,input::-webkit-search-cancel-button,input::-webkit-search-results-button,input::-webkit-search-results-decoration{display:none}input,select,textarea{vertical-align:middle;-webkit-appearance:none;-webkit-border-radius:0}select{cursor:pointer}select:focus{outline:none}input:focus{outline:none}a{text-decoration:none;color:inherit;cursor:pointer;display:inline-block}*{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-webkit-tap-highlight-color:rgba(255,255,255,0)}.clearfix::after{content:"";clear:both;display:block}.readable-hidden,.a11y,legend{position:absolute;width:1px;height:1px;overflow:hidden;margin:-1px;clip:rect(0,0,0,0)}input:-webkit-autofill,input:-webkit-autofill:hover,input:-webkit-autofill:focus,input:-webkit-autofill:active{transition:background-color 5000s ease-in-out 0s;-webkit-transition:background-color 9999s ease-out;-webkit-box-shadow:0 0 0 1000px #fff inset!important;-webkit-text-fill-color:#545454!important}
	/*font*/
	@font-face {font-family: "SpoqaHanSansNeoRegular";src: local(※), url("https://youcandoo.yanadoocdn.com/v3/youcandoo/marketing/font/SpoqaHanSansNeoRegular.woff2") format("woff2"); font-weight: normal !important;}
	@font-face {font-family: "SpoqaHanSansNeoMedium";src: local(※), url("https://youcandoo.yanadoocdn.com/v3/youcandoo/marketing/font/SpoqaHanSansNeoMedium.woff2") format("woff2"); font-weight: normal !important;}
	@font-face {font-family: "SpoqaHanSansNeoBold";src: local(※), url("https://youcandoo.yanadoocdn.com/v3/youcandoo/marketing/font/SpoqaHanSansNeoBold.woff2?") format("woff2"); font-weight: normal !important;}
	@font-face {  font-family: "NanumSquareOTFExtraBold";src: local(※), url("https://youcandoo.yanadoocdn.com/v3/web/assets/font/NanumSquareOTFExtraBold.woff?resource_version=<?=$resource_version?>") format("woff");font-weight: normal;}
	@font-face {  font-family: "NanumSquareOTFRegular";src: local(※), url("https://youcandoo.yanadoocdn.com/v3/web/assets/font/NanumSquareOTFRegular.woff") format("woff");font-weight: normal !important;}
	/* app header common css */
	header {font-family: "NanumSquareOTFRegular","sans-serif"; display: flex;position: fixed;left: 0;top: 0;width: 100%;height: 13.89vw;background-color: #fff;align-items: center;border-bottom: 1px solid #ECECEC;z-index: 200;}
	header p {width: 72.22vw;color: #000;font-size: 5VW;text-align: left;}
	header a {width: 13.89vw;height: 13.89vw;color: #fff;font-size: 3.33vw;text-align: center;text-indent: -2777.50vw;background-image: url(https://youcandoo.yanadoocdn.com/youcandoo/assets/images/webviewimg/v3/back_btn_black.png);background-repeat: no-repeat;background-position: 50% 50%;background-size: 4.72vw 6.94vw;}
	main{padding-top: 13.89vw; position: relative;}
	/* 해당 페이지 css */
	#btnMoveToModal { position: absolute; bottom: 125vw; left: 50%; transform: translateX(-50%); width: 86vw; border-radius: 10px; height: 19vw; background-color: transparent;}
	.modal.active{visibility: visible;opacity: 1;transition-delay: 0s;}
	.modal {opacity: 0;visibility: hidden;transition: all 0.3s ease;position: fixed; z-index: 10; top: 0; left: 0; width: 100%; height: 100%; background-color:#292828f0;}
	.modal-content {display: flex;flex-direction: column;border-radius: 10px; position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); width: 85.3vw; height: 72vw; background-color: #fff;}
	.modal-content .text-content {line-height: 1.3;margin-bottom: 14%; text-align: center; font-family: "SpoqaHanSansNeoRegular", "sans-serif"; color: #666666; font-size: 4vw;}
	.modal-content .title { margin-top: 1.6vw; margin-bottom: 7.4vw; line-height: 1.3; text-align: center; font-size: 5vw;color: #333333; font-family: "SpoqaHanSansNeoBold", "sans-serif";}
	.modal-content .text-content strong {font-family: "SpoqaHanSansNeoBold", "sans-serif";}
	.modal-content .close-btn-top { margin-top: 4.5vw; margin-right: 4.5vw; text-align: right; background-color: transparent;}
	.modal-content .close-btn-top img {width: 5vw;}
	.modal-content .close-btn-bottom {border-radius: 0 0 10px 10px;font-size: 5vw; align-items: flex-end; width: 100%; height: 13.6vw; text-align: center; background-color: #7B33F9;  color: #fff; font-family: "SpoqaHanSansNeoBold", "sans-serif";}
</style>
<body>
<header>
	<a id="btnBack">뒤로가기</a>
	<p>이벤트</p>
</header>
<main>
	<article class="main">
		<h1 style="display: none;">메인 페이지 영역</h1>
		<img src="https://youcandoo.yanadoocdn.com/youcandoo/marketing/event/images/20220317/event_page.png" alt="이벤트 이미지">
		<a id="btnMoveToModal" href="javascript:void(0);"></a>
	</article>

	<div class="modal" id="failureModal">
		<div class="modal-content">
			<button class="close-btn close-btn-top" type="button"><img src="https://youcandoo.yanadoocdn.com/youcandoo/marketing/event/images/20220317/close_btn.png" alt="닫기"></button>
			<div class="text-wrap">
				<h2 class="title">앗, 백일습관러가<br> 아니시네요😥</h2>
				<p class="text-content"><strong>백일노트</strong>는 일단백 챌린지 두잇<br> 참여자 중 100일, 99일<br> 인증 성공자에 한해 제공됩니다.</p>
			</div>
			<button class="close-btn close-btn-bottom" type="button">확인</button>
		</div>
	</div>

	<div class="modal" id="successModal">
		<div class="modal-content">
			<div class="modal-content">
				<button class="close-btn close-btn-top" type="button"><img src="https://youcandoo.yanadoocdn.com/youcandoo/marketing/event/images/20220317/close_btn.png" alt="닫기"></button>
				<div class="text-wrap">
					<h2 class="title">일단백 챌린지<br> 성공을 축하합니다👍</h2>
					<p class="text-content"><strong>백일노트</strong> 선물 증정을 위해<br> 3월 31일(목) 까지<br> 배송 정보를 입력해주세요!</p>
				</div>
				<button id="btnMoveToShippingInfo" class="close-btn-bottom close-btn" type="button">배송정보 입력</button>
			</div>
		</div>
	</div>

	<div class="modal" id="non-login-popup">
		<div class="modal-content">
			<div class="modal-content">
				<button class="close-btn close-btn-top" type="button"><img src="https://youcandoo.yanadoocdn.com/youcandoo/marketing/event/images/20220317/close_btn.png" alt="닫기"></button>
				<div class="text-wrap">
					<h2 class="title">앱 로그인 후<br> 다시 확인해주세요🙏</h2>
					<p class="text-content">황금종료상 당첨자<br> 조회를 위해 유캔두 앱<br> 로그인이 필요합니다.</p>
				</div>
				<button class="close-btn close-btn-bottom" type="button">확인</button>
			</div>
		</div>
	</div>
</main>
</body>
<script>
	/* 전역변수 */
	 let account_token = "";

	/* 단말기 확인 */
	const userAgentOsType = navigator.userAgent.toLowerCase();
	function isAos() {
		return userAgentOsType.indexOf('android') > -1;
	}
	function isIos() {
		return (userAgentOsType.indexOf("iphone") > -1 || userAgentOsType.indexOf("ipad") > -1 || userAgentOsType.indexOf("ipod") > -1);
	}

	/* 서버 api 처리 */
	const hostname = window.location.host;
	let baseApiUrl = 'https://api.youcandoo.co.kr/v3.0/webview/';
	switch (hostname.toString()) {
		case 'www.youcandoo.co.kr' :
			baseApiUrl = 'https://api.youcandoo.co.kr/v3.0/webview/';
			break;
		case 'stagingwww.youcandoo.co.kr' :
			baseApiUrl = 'https://stagingapi.youcandoo.co.kr/v3.0/webview/';
			break;
		case 'testingwww.youcandoo.co.kr' :
			baseApiUrl = 'https://testingapi.youcandoo.co.kr/v3.0/webview/';
			break;
		case 'developmentwww.youcandoo.co.kr' :
			baseApiUrl = 'https://developmentapi.youcandoo.co.kr/v3.0/webview/';
			break;
		case 'localwww.youcandoo.co.kr' :
			baseApiUrl = 'https://developmentapi.youcandoo.co.kr/v3.0/webview/';
			break;
		default :
			baseApiUrl = 'https://api.youcandoo.co.kr/v3.0/webview/';
	}
	/* 로드 이벤트 */
	window.addEventListener('DOMContentLoaded', function() {
		getDeviceInfoFromNative();
	});
	/* 클릭 이벤트 */
	document.getElementById('btnBack').addEventListener('click', webviewBack);
	document.querySelectorAll(".close-btn").forEach(element => element.addEventListener('click', onClickBtnModalClose));
	document.getElementById('btnMoveToModal').addEventListener('click', getCampaignInfo);

	/* json 응답,요청 처리 */
	function getCampaignInfo() {
		if(account_token) {
			const httpRequest = new XMLHttpRequest();
			httpRequest.open("POST", `${baseApiUrl}event/get/kakao100-subject`, true);
			httpRequest.responseType = 'json';
			httpRequest.send(JSON.stringify({'account_token' : account_token}));
			httpRequest.onloadend = async function () {
				if (httpRequest.status === 200) {
					const result = await httpRequest.response;
					if (result.status === 0) {
						buildInfo(httpRequest.response.data);
					}else {
						onClickBtnMoveToFailureModal();
					}
				}
				else {
					alert('목록을 불러오지 못했습니다.');
				}
			}
		}else {
			onClickBtnMoveToNonLoginModal();
		}
	}

	/* 조건 성공시 팝업 노출 */
	function buildInfo(data) {
		const surveyUrl = data.survey_url;
		onClickBtnMoveToSuccessModal();
		document.getElementById('btnMoveToShippingInfo').addEventListener('click', function () { onClickBtnMoveToShippingInfo(surveyUrl) });
	}

	/* 앱 외부 브라우저(배송정보 입력) 관련 이동 */
	function onClickBtnMoveToShippingInfo(surveyUrl) {
		if (isAos())
		{
			try {
				const aosParams = JSON.stringify({"pageType" : "browser" , "pageValue" : { "url" : surveyUrl}});
				window.webview.webviewonclick(aosParams);
			} catch (e) {
				console.log(e)
			}
		}
		else if (isIos())
		{
			try {
				const iosParams = JSON.stringify({ "action" : {"pageType" : "browser", "pageValue" : { "url" : surveyUrl}}});
				const message = "jscall://"+encodeURIComponent(iosParams);
				let iframe = document.createElement('iframe');
				iframe.setAttribute('src', message);
				document.documentElement.appendChild(iframe);
				iframe.parentNode.removeChild(iframe); iframe = null;
			} catch (e) {
				console.log(e)
			}
		}
	}

	/* 백버튼 기능 */
	function webviewBack() {
		if (isAos()) {
			try {
				window.webview.webviewback();
			} catch (e) {
				console.log(e)
			}
		} else if (isIos()) {
			try {
				const iosParams = JSON.stringify({ "action" : { "pageType" : "webview_back"} });
				const message = "jscall://"+encodeURIComponent(iosParams);
				let iframe = document.createElement('iframe');
				iframe.setAttribute('src', message);
				document.documentElement.appendChild(iframe);
				iframe.parentNode.removeChild(iframe); iframe = null;
			} catch (e) {
				console.log(e)
			}
		}
	}

	/* account_token 데이터 값 */
	function getDeviceInfoFromNative() {
		if (isAos())
		{
			let responseObjFromAos;
			try {
				responseObjFromAos = window.webview.getDeviceInfo();
			} catch (e) {
				console.log(e.message)
			} finally {
				getDeviceInfo(responseObjFromAos);
			}
		}
		else if (isIos())
		{
			try {
				const param = JSON.stringify({ "action" : {"pageType" : "inquiry"} });
				const message = "jscall://"+encodeURIComponent(param);
				let iframe = document.createElement('iframe');
				iframe.setAttribute('src', message);
				document.documentElement.appendChild(iframe);
				iframe.parentNode.removeChild(iframe);
				iframe = null;
			} catch (e) {
				console.log(e.message);
				getDeviceInfo();
			}
		}
	}
	function getDeviceInfo(obj) {
		if (obj !== undefined)
		{
			const jsonObj = JSON.parse(obj)
			account_token = jsonObj.account_token ? jsonObj.account_token : false;
		}
	}

	/* 모달 관련 */
	function onClickBtnModalClose() {
		document.querySelectorAll('.modal').forEach(element => element.classList.remove('active'))
	}
	function onClickBtnMoveToSuccessModal() {
		document.getElementById('successModal').classList.add('active');
	}
	function onClickBtnMoveToFailureModal() {
		document.getElementById('failureModal').classList.add('active');
	}
	function onClickBtnMoveToNonLoginModal() {
		document.getElementById('non-login-popup').classList.add('active');
	}

</script>
</html>
